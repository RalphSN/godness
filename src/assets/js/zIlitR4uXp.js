import{b as o,v as i,o as Q,j as W,f as _,A as L,q as f,G as X,h as n,y as d,E as g,u as a,H as h,e as S,i as x,J as Y,t as R,F as Z,D as ee,I as se,K as te,L as ae}from"./6jsWGvxKsM.js";import{I as v}from"./DN1vSfZusm.js";import{u as I,B as oe}from"./Bl8gX_-ncd.js";import{P as ne}from"./DuubWaUfyu.js";import{t}from"./CtbTsni8ES.js";import{_ as re,u as le,e as ie,a as ce}from"./DhXoEIzR0R.js";import{u as ue}from"./B4hfugN3yS.js";import"./BlTxHScWgo.js";const pe={popShow:!1,bg:{image:new URL("/assets/img/6295afe4.png",import.meta.url).href,isBg:!0},closeBtn:{image:new URL("/assets/img/915957f6.png",import.meta.url).href,isBg:!0},title:{image:new URL("/assets/img/f3659138.png",import.meta.url).href},selectUp:{image:new URL("/assets/img/4670c87d.png",import.meta.url).href},selectDown:{image:new URL("/assets/img/ed50e181.png",import.meta.url).href},agreement:{image:new URL("/assets/img/86d00cd1.png",import.meta.url).href},tick:{image:new URL("/assets/img/7faa9624.png",import.meta.url).href},accountPlaceholder:{text:"請輸入手機號碼"},subscribe:{image:new URL("/assets/img/c5038f77.png",import.meta.url).href,isBg:!0,clickEvent:"","data-class-list":["scan-light"]},finger:{image:new URL("/assets/img/5a96bd01.png",import.meta.url).href},contentText:{text:"預約完成可抽以下豪禮"},timeTips:{text:"機會僅剩"},rewardImg:{image:new URL("/assets/img/f7c44138.png",import.meta.url).href},areaCodes:[{name:"台灣+886",id:"886",maxlength:9},{name:"香港+852",id:"852",maxlength:8},{name:"澳门+853",id:"853",maxlength:8}]},de={class:"bg"},ge={class:"content"},me={class:"phone"},_e={class:"areacode-selector"},ve={class:"icon"},fe={class:"areacode-menu"},he=["onClick"],Se={class:"input"},xe=["placeholder"],we={class:"draw-btn"},Pe={__name:"index",emits:["popClose"],setup(ke,{emit:Te}){const D=le(),m=ie(),w=m.getUserInfo,A=o(()=>t.i18nTm("pre_djssg_gt_pc_PopFirstScreen.bg")??{}),B=o(()=>t.i18nTm("pre_djssg_gt_pc_PopFirstScreen.closeBtn")??{});o(()=>t.i18nTm("pre_djssg_gt_pc_PopFirstScreen.title")??{});const y=o(()=>t.i18nTm("pre_djssg_gt_pc_PopFirstScreen.selectUp")??{}),E=o(()=>t.i18nTm("pre_djssg_gt_pc_PopFirstScreen.selectDown")??{});o(()=>t.i18nTm("pre_djssg_gt_pc_PopFirstScreen.tick")??{});const M=o(()=>t.i18nTm("pre_djssg_gt_pc_PopFirstScreen.accountPlaceholder")??{});o(()=>t.i18nTm("pre_djssg_gt_pc_PopFirstScreen.agreement")??{});const P=o(()=>t.i18nTm("pre_djssg_gt_pc_PopFirstScreen.subscribe")??{});o(()=>t.i18nTm("pre_djssg_gt_pc_PopFirstScreen.finger")??{}),o(()=>t.i18nTm("pre_djssg_gt_pc_PopFirstScreen.contentText")??{}),o(()=>t.i18nTm("pre_djssg_gt_pc_PopFirstScreen.timeTips")??{}),o(()=>t.i18nTm("pre_djssg_gt_pc_PopFirstScreen.rewardImg")??{});const k=o(()=>t.i18nTm("pre_djssg_gt_pc_PopFirstScreen.areaCodes")??[]),N={},T=ce(),u=i(!1),c=i(w?.code||"886"),s=i(w?.phone||""),p=i(!0),$=i(!0);i("00:00:00");const b=i(null),C=i(!1),F=i({}),z=()=>{const r=t.handleModuleData(pe,N,"pre_djssg_gt_pc_PopFirstScreen");D.mergeAllLocaleMessage(r),m.isAuthorize?setTimeout(()=>{f(()=>{document.querySelectorAll(".aos-cent").forEach(e=>{e.classList.add("aos-init","aos-animate")})})},200):(U(),f(()=>{C.value||(C.value=!0,I.reportTrackEvent({event:"pageloaded"}))}))},U=()=>{if(s.value=s.value.replace(/\D/g,""),c.value=="886"){s.value.length>9&&(s.value=s.value.slice(0,9));const e=/^9\d{8}$/.test(s.value);p.value=!e;return}if(c.value=="852"){s.value.length>8&&(s.value=s.value.slice(0,8));const e=/^\d{8}$/.test(s.value);p.value=!e;return}if(c.value=="853"){s.value.length>8&&(s.value=s.value.slice(0,8));const e=/^[68]\d{7}$/.test(s.value);p.value=!e;return}},V=()=>{u.value&&(u.value=!1)},j=()=>{u.value=!u.value},q=r=>{c.value=r.id,s.value="",j()},O=async r=>{if(!$.value)return t.showMessage("請先勾選:同意個人資料蒐集使用及接收讯");if(s.value==""||p.value)t.showMessage("請輸入正確的手機號!");else{const{data:e}=await ue({phone:s.value,code:c.value});t.local.set("token",e.token),t.token=e.token,m.setAuthorize(!0),m.setUserInfo(e),r&&I.reportClick({event:r}),t.showMessage("登入成功!"),T.closePop("pre_djssg_gt_pc_PopFirstScreen")}},G=(r=!0)=>{r&&(F.value.closeCallbackFunc&&F.value.closeCallbackFunc(),T.closePop("pre_djssg_gt_pc_PopFirstScreen"),f(()=>{document.querySelectorAll(".aos-cent").forEach(e=>{e.classList.add("aos-init","aos-animate")})}))},H=()=>{clearInterval(b.value),b.value=null};return Q(()=>{z()}),(r,e)=>{const J=X("clickoutside");return _(),W(ne,{class:"pop-first-screen",onOnUnmounted:e[2]||(e[2]=l=>H())},{default:L(()=>[n("div",de,[e[5]||(e[5]=n("div",{class:"clear"},null,-1)),d(v,g({class:"box"},a(A),{nolazy:"true"}),{default:L(()=>[d(oe,g({class:"close-btn"},a(B),{onClick:G}),null,16),n("div",ge,[e[3]||(e[3]=n("div",{class:"clear"},null,-1)),e[4]||(e[4]=n("div",{class:"title"},null,-1)),n("div",me,[h((_(),S("div",_e,[n("div",{class:x(["custom-select",{active:a(u)}]),onClick:j},[Y(R(a(k).find(l=>l.id==a(c))?.name||"")+" ",1),n("div",ve,[d(v,g({class:"img"},a(y)),null,16),d(v,g({class:"img"},a(E)),null,16)])],2),h(n("div",fe,[n("ul",null,[(_(!0),S(Z,null,ee(a(k),(l,K)=>(_(),S("li",{key:K,class:x(["areacode-item",{active:l.id==a(c)}]),onClick:be=>q(l)},R(l.name),11,he))),128))])],512),[[se,a(u)]])])),[[J,V]]),n("div",Se,[h(n("input",{"onUpdate:modelValue":e[0]||(e[0]=l=>te(s)?s.value=l:null),class:x({active:a(p)}),type:"text",placeholder:a(M).text,onInput:U},null,42,xe),[[ae,a(s)]])])]),n("div",we,[d(v,g({class:"btn"},a(P),{nolazy:"true",onClick:e[1]||(e[1]=l=>O(a(P).clickEvent))}),null,16)])])]),_:1},16)])]),_:1})}}},Ae=re(Pe,[["__scopeId","data-v-6df70f0a"]]);export{Ae as default};
